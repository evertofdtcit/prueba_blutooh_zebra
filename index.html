<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Test Impresora Zebra</title>
  <script src="BrowserPrint-3.1.250.min.js"></script>
</head>
<body>
  <h1>Prueba de impresión Zebra</h1>

  <!-- Impresión desde PC (Wi-Fi o USB) -->
  <button onclick="imprimirEtiqueta()">Imprimir desde PC</button>


<p>
    <a id="printLink" href="#">
      Imprimir Etiqueta
    </a>
  </p>

  <script>


    function imprimirEtiqueta() {
      BrowserPrint.getDefaultDevice("printer", function(printer) {
        const zpl = "^XA^FO50,50^ADN,36,20^FD¡Hola desde Zebra por Wi-Fi!^FS^XZ";
        printer.send(zpl, function() {
          alert("Etiqueta enviada correctamente");
        }, function(error) {
          alert("Error al imprimir: " + error);
        });
      }, function() {
        alert("No se detectó una impresora por defecto.");
      });
    }

  const zplData = '^XA^FO50,50^ADN,36,20^FDProbando desde la web^FS^XZ';
        const encodedZpl = encodeURIComponent(zplData);
        const deepLinkUrl = `printconnect://v1/print/zpl?data=${encodedZpl}`;
        document.getElementById('printLink').href = deepLinkUrl;
        console.log("Deep Link generado:", deepLinkUrl);
  </script>
</body>
</html>
